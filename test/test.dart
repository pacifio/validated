import 'package:test/test.dart';
import 'package:validated/validated.dart' as validate;

void main() {
  test('testing validators', () {
    expect(validate.isBoolean('true'), true);
    expect(validate.isEmail('not@email'), false);
    expect(validate.isURL("google.com"), true);
    expect(validate.isEmoji("ðŸ˜€"), true);
  });

  group('credit cards', () {
    final List<String> cards = [
      '375865880309656',
      '349743144557340',
      '343044821916917',
      '346291924406364',
      '340329501415204',
      '349176773770225',
      '374386538490344',
      '348205564888572',
      '378741890290755',
      '342245517892491',
      '376650218124327',
      '340821611191766',
      '343323038549541',
      '342604959518776',
      '349848862382993',
      '371826353627572',
      '378922620672336',
      '341604822511850',
      '371170193848175',
      '345898419666616',
      '349173262568996',
      '378451033090282',
      '372480333344277',
      '343326933908225',
      '341919871566807',
      '378792531728299',
      '377952755682272',
      '346796346046754',
      '345749387705151',
      '342876744059403',
      '373468978737557',
      '343354286161226',
      '348125379438795',
      '373068529098499',
      '349773321616247',
      '340633062172538',
      '375001771956575',
      '379740277783282',
      '373138733823550',
      '370006547034164',
      '343039905266130',
      '340124227450787',
      '373561457577088',
      '341519148788455',
      '342011037176058',
      '345668822919443',
      '341583182623275',
      '346058800900426',
      '374653658514488',
      '372188719539663',
      '375050632003267',
      '343129057137310',
      '340206362083802',
      '376847101035426',
      '340758080310537',
      '344225597084415',
      '349131301892751',
      '341089338770317',
      '375497843656609',
      '346477883221288',
      '374185673333842',
      '346276596168160',
      '379559227318381',
      '373520932004993',
      '348387430476913',
      '340787321469331',
      '379984155604356',
      '374689167887429',
      '379237615647741',
      '340626115492556',
      '341198122547425',
      '343456109449892',
      '348321936150771',
      '345134255577166',
      '344257073862642',
      '344501588516569',
      '375364100241675',
      '375826832027796',
      '347801518517811',
      '348083984957487',
      '345595271429816',
      '374978380069299',
      '371534130643744',
      '372020636624718',
      '343688827986157',
      '348806970106192',
      '341291283655507',
      '374405303657182',
      '379966948916361',
      '372372099667589',
      '377576810740922',
      '376914609491376',
      '342570384607684',
      '347629334209523',
      '372218745871135',
      '342079992219205',
      '373001889525488',
      '348884623206883',
      '377118469577600',
      '343204217594591',
    ];

    for (String number in cards) {
      test('valid: $number', () {
        expect(validate.isCreditCard(number), true);
      });
      final l = number.length;
      String copy =
          number.replaceRange(l, l, '${number.codeUnitAt(l - 1) + 1}');
      test('invalid: $copy', () {
        expect(validate.isCreditCard(copy), false);
      });
    }
  });
}
